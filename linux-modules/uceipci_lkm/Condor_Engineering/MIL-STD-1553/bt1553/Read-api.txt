Documentation for BusTools/1553-API Version 8.28


Introduction

This is the distribution for BusTools/1553-API Version 8.28.
The different operating system distributions will contain
the necessary drivers, an Application Programming Interface
(API) library provided as source code and for Windows® a
dynamic library, and example code for the BusTools/1553-API
family of products. The following operating system versions
are supported with this version of the API:
* 64-bit/32-bit Windows 8, 8.1, 10, and Windows Server 2012
  R1/R2
* 64-bit/32-bit Windows 7 and Windows Server 2008 R2 (SP1
  and KB3033929 are required for each)
* 32-bit Windows XP (uses an unsigned driver)
* Linux kernels 2.4.x, 2.6.x, 3.x, 4.x and 5.x
* VxWorks 6.x (support for DKM) and 7 (support for DKM and
  RTP)
* Integrity 5.10 and 11.0.4
* LynxOS v4 and v5 (PPC only)

The following products are supported with this version of
the API: R15-USB, R15-USB-MON, R15-MPCIE, RAR15(X/XF/XXT),
RAR15-XMC-(IT/FIO/XT), RPCIE-1553, R15-EC, R15-LPCIE,
RXMC2-1553, RXMC-1553, QPM-1553, QPCX-1553, QPCI-1553,
QCP-1553, QPMC-1553 and Q104-1553-P. The RQVME2-1553,
QVME-1553 and PCCARD-D1553 are supported but only on a
32-bit operating system.

For any questions on non-supported operating systems,
non-listed products or other questions contact technical
support with the contact information at the end of this
document.


Firmware Version 6 Changes Affecting Existing Applications
* Starting with BusTools/API-1553 v8.00, all time-tags
  transitioned from 48-bits having a 1 microsecond
  resolution to 64-bits having a 1 nanosecond resolution.
* Many on-board structures have changed.  If you are
  directly reading data from these structures you will need
  to review these changes and update your code to access
  the correct addresses.  
* Bus Monitor structures changed from fixed sized to
  variable size depending on the number of data words. This
  change has eliminated the routines
  BusTools_BM_MessageGetAddr and BusTools_BM_MessageGetid
  from the API.  If your code depends on these functions
  you will need to redesign based on variable size BM
  buffers.
* The Bus Controller on-board structures have changed to
  accommodate multiple BC data buffers for each message.
  While this change is transparent to applications using
  existing Bus Controller functions; if you are reading
  data directly from these structures, your application
  must be altered to support multiple buffers.
* The structure and size of the interrupt queue was
  modified to contain two-word entries, and interrupt mode
  and message address, and the queue length was increased
  to 512 entries.  
* Discrete channels are now shifted in the bit-wise
  register, where discrete 1 is assigned to bit 1 instead
  of bit 0 and so forth.


Scope
This document covers the API software only. You should
refer to the following documents for information on
supported boards, kernels and prerequisites, and detailed
installation and uninstall instructions.
* INSTALL.PDF -  Install, uninstall and configuration
  verification procedures for all supported Windows
  operating systems.
* LINUX_INSTALL.TXT - Install, uninstall and configuration
  verification procedures for Linux.
* LINUX_SUPPORT.TXT - Information for supported kernels,
  architectures and dependences.
* INTEGRITY_INSTALL.PDF - Integrity installation instructions
* LYNXOS_4_XXX_INSTALL_BT1553.TXT and
  LYNXOS_5_XXX_INSTALL_BT1553.TXT - Install, uninstall and
  configuration verification procedures for LynxOS Versions
  4 and 5, where XXX = PPC or X86.
* BUSTOOLS1553-API VXWORKS USER MANUAL.PDF - VxWorks
  installation instructions
* READ-VME-VXI.PDF - Documentation for VME/VXI 1553 product
  installation using the National Instruments PCI-MXI-2 interface.


Development Notes
* The Windows distribution provides API dynamic libraries
  compiled with Visual Studio 2008 (64-bit/32-bit) and
  Visual Studio 6 (32-bit). It also provides the source to
  build the examples and the API source with object files
  (64-bit/32-bit compiled with Visual Studio 2008) to build
  the API library.
* The Linux distribution provides the source/makefiles to
  build the drivers, the 64-bit/32bit low-level/API shared
  libraries, and examples. The USB low-level 64-bit and
  32-bit static libraries were compiled with GCC 4.8.3 and
  are dependent on the libUSB package starting with version
  1.0.19.
* The VxWorks distribution provides the source/components
  to build the drivers, and the source for the API and
  examples.
* The Integrity distribution provides the source to build
  the driver, the API, and examples.
* The LynxOS distributions provides the source/makefiles to
  build the driver, the API static library, and examples.


Visual Studio .Net 2008
For the convenience of users with Visual Studio 2008 or
later, projects are included to aid using the .NET
compiler and development environment.  For C# development,
BusTools/1553-API specifically supports the .NET Framework
with a managed C# API library.


BusTools/1553-API Revision Information
Release Notes - Version 8.28 – December 30, 2019
1. Updated the Windows distribution to CEI-Install v4.91
   which exclusively uses SHA-256 for signing the driver
   which only supports 32-bit/64-bit Windows 7/2008R2 (SP1
   and KB3033929 required), 8, 8.1, Windows Server 2012
   R1/R2 and 10. To support 32-bit Windows XP the
   distribution uses an unsigned driver.
2. Updated the Linux distribution to include Linux support
   package v1.36 which provides support for Linux kernel 5.x
3. Updated the VxWorks distribution to include the VxWorks
   support package v4.01 which provides RTP support with
   the VxBus Gen2 device driver.
4. Modified BusTools_GetValidDiscrete to return
   API_HARDWARE_NOSUPPORT for boards with firmware v4/5.
5. Fixed API_Init to continue when API_CONT_ON_MEM_FAIL
   flag is set.
6. Modified API_Init when clearing the FW v6 hardware
   control register to preserve the RT31Bcst and sa32MC
   bits for HW RT address.
7. Modified BusTools_ReadBoardTemp to increase the delay
   between writing and reading of the temp control register.
8. Fixed BusTools_BC_Checksum1760 when word count is 0
9. Fixed BusTools_GetDevInfo to use DEVINFO_T for VME
   boards.
10. Modified vbtReadVMEConfigRegs and vbtWriteVMEConfigRegs
    to support Big Endian.
11. Fixed BusTools_BIT_TwoBoardWrap to execute two
    iterations of the test and added time delay waiting for
    the BC messages to transact.
12. Modified BusTools_BIT_CableWrap by adding a time delay
    waiting for the BC messages to transact.
13. Fixed v6_RT_AbufWrite when writing to the RT broadcast
    control buffers.
14. Updated with the latest version of "MIL-STD-1553
    Hardware Installation and Reference Manual" and "UCA32
    LPU Reference Manual" into the distributions.
15. Updated the API source in the LynxOS and Integrity
    distributions.

Release Notes - Version 8.24A - June 21, 2019
1. Updated the "Hardware Platform Selection" section of 
   the Windows installer to add a Thunderbolt(TM) option 
   which allows selection of QPM-1553, RAR15XF, or 
   RXMC-1553 on a Thunderbolt expansion adapter.
2. Updated the RAR15 device type selection in the 
   Windows installer to include all associated device types 
   (RAR15-XMC-XT, RAR15-XMC-IT, RAR15-XMC-FIO, 
   RAR15X, RAR15XF, and RAR15XXT).
3. Added "TB3-TO-CMC-LP_Users_Guide.pdf", the User's 
   Guide for Abaco's Thunderbolt 3 expansion adapter 
   which contains important information about operating a 
   QPM-1553-TB, RXMC-1553-TB, or RAR15XF-TB in a 
   Windows Thunderbolt environment.
4. Integrated the latest version of "MIL-STD-1553 
   Hardware Installation and Reference Manual.pdf" into 
   the Windows distribution.
5. Integrated the latest version of "UCA32 LPU 
   Reference Manual.pdf" into the Windows 
   distribution.
6. Updated the VxWorks distribution to v8.22A, which 
   includes an updated CDF file for the VxBus Gen 2 driver.
7. No change to any API library source/binaries or example 
   source/binaries since API v8.22.
8. All documentation references to API v8.22 within this 
   distribution apply to the current v8.24A release as well.


Release Notes - Version 8.24 - November 1, 2018
1. Updated the Windows 10 driver packages and low-level 
   interface libraries to resolve an intermittent crash 
   issue on certain computers.
2. Added hardware interrupt support for 32-bit programs 
   under 64-bit Windows 10.
3. Updated the Linux distribution to include the latest
   Linux driver/low-level support package.
4. No change to any API library source/binaries or example
   source/binaries since API v8.22 (only drivers and low-
   level interface libraries were updated for this release).

Release Notes - Version 8.22 - February 23, 2018
1. Added support for VxWorks 7 with the VxBus Gen2 
   Device Driver.
2. Fixed support for 64-bit real-time operating systems.

Release Notes - Version 8.20 - July 19, 2017
1. Added the API support for R15-USB-MON product.

Release Notes - Version 8.18 - December 2, 2016
1. Added the API support for R15-MPCIe board.
2. Updated the BusTools_RT_AbufWrite() to improve
   performance.
3. Added Integrity X86 support.

Release Notes - Version 8.16 - January 22, 2016
1. Added the support for 32-bit and 64-bit Windows 8.0, 
   8.1, Server 2012 (R1 and R2), and Window 10.
2. Removed support for Window 2000.
3. Added the code to clear aperiodic registers for the
   BC_Start supporting firmware version 6.
4. Fixed the BusTools_BC_ReadLastMessage,
   BusTools_RT_ReadLastMessage and
   BusTools_BM _ReadLastMessage with wrong size of 
   the IQ_block for firmware version 6.
5. Fixed end of file condition handling and initialized the
   variables of the playback function for both firmware
   version 5 and 6 supports.
6. Fixed the VxWorks Driver to support both 1553 and 
   ARINC hardware interrupts.
7. Important note for Windows 10 users: Certain Microsoft
   processes may prevent you from launching our installer
   for a period of time after logging in to your computer.
   When running our installer shortly after logging in, you
   may notice our installer appears briefly, and then
   disappears completely for a period of time, after which
   it automatically appears again, starts up, and functions
   normally.  At the time of this release, delays of two
   minutes or less have been commonly observed (although 
   5-7 minute delays were observed in some cases).  There 
   are currently no workarounds available to prevent this
   behavior, although disabling OneDrive has been shown 
   to decrease the installer startup delay in some cases.
8. Important note for Windows users: After plugging in a 
   new card and booting up, a subsequent reboot may be 
   required on some systems in order for Windows to detect 
   the new card.  If you add a card to your system and it 
   is not detected after booting up, reboot the system to 
   complete installation.

Release Notes - Version 8.14 - April 22, 2015 
1. Added a set of API functions:
   BusTools_RT_MessageBufferNext, 
   BusTools_FirmwareReload, BusTools_FlashLogRead, 
   BusTools_FlashLogWrite, BusTools_FlashLogErase
2. Fixed the BC rep_rate and status to flips for the big
   endian processors.
3. Fixed BusTools_RT_CbufRead address error from
   vbtReadRAM32 to vbtReadRelRAM32. 
4. Fixed vbtReadBMRAM32 to use 
   RAM_ADDR(cardnum,bmaddr).
5. Added to check hardware interrupt in the
   v6_BM_ReadLastMessageBlock.
6. Changed v6_BM_Init to handle disabled h/w interrupts.
7. Changed api_int_fifo structure from the BT_FIFO 
   reserved to int_status in busapi.h
8. Updated QuikView1553
9. Added C# .NET example to start menu
10. Removed VB and CVI from start menu
11. Fixed CEI_INTEGRITY_INTERRUPT_FUNCTION.c 
    to use semaphore instead of connection
12. Corrected installation issue  with  VME boards
13. Added new BC function BusTools_DataBufferWrite for
    firmware version 6.
14. Added dump of user defined memory

Release Notes - Version 8.12 - 21 February 2014
1. Changed API_BC_MBUF to add new parameter, 
   next_branch_addr.
2. BusTools_BC_MessageRead returns next_branch_addr 
   as part of the API_BC_MBUF for v6.03 firmware 
   on conditional branches.
3. Changed BusTools_BM_Init to allow disabling of 
   hardware interrupts.
4. Adds new suite of example programs.
5. Test Config is no longer supported or included in the
   distribution.
6. Channel sharing works for both v4/5 and v6 boards.
7. Updated VxWorks Interrupt processing to work on all
   channels.
8. BusTools_ReadBoardTemp adds support for 
   RAR15-XMC-FIO.
9. The #define for MAX_BTA was moved to each target 
   block in target_defines.h.  For Window MAX_BTA 
   is now 64.
10. The API_INT_FIFO now stores the interrupt status for 
    the message in the “reserved’ field.
11. Added support the R15-PMC.
12. Functions BusTools_V6_SetDiscreteOut,
    BusTools_V6_GetDiscreteOut and 
    BusTools_SetV6DiffTrigOut are not needed and were 
    removed.

Release Notes - Version 8.08 - 13 June 2013
1. Added V6 support for most boards
2. Fix a variety bugs

Release Notes - Version 8.06 - 24 October 2012
1. Added support for RAR15-XMC-XT
2. Added new function for V6.01 
   BusTools_GetValidDiscrete that return the valid 
   discrete channels
3. Added functions BusTools_BC_SelectBufferRead and
   BusTools_BC_SelectBufferUpdate read specific BC data
   buffer when in multiple BC buffer mode.
4. Added function BusTools_MemoryAvailable to return the
   amount of unused RAM for a channel.
5. Added PI_TTD_RELM_NS, API_TTD_IRIG_NS, 
   API_TTD_DATE_NS to specify nanosecond time tag 
   resolution on calls the BusTools_TimeGetString

Release Notes - Version 8.00 - 24 May 2012
1. Add support for R15-USB.
2. Combine support F/W v5.x (and earlier) and v6.0 into
   single API
3. New v6 Bus Monitor design.
4. New v6 Bus Controller design.
5. New v6 interrupt queue design.
6. 64-bit time tags with either micro- or nano-seconds
   resolution
7. New Bus Controller functions for multiple BC data 
   buffers.
8. New interrupt events EVENT_BM_OVRFL, 
   EVENT_BC_BSY_OVFL, EVENT_HP_MF_OVFL, 
   EVENT_LP_MF_OVFL.


Contact Information
If you have any questions or need technical information,
please contact: 

Abaco Systems, Inc.
26 Castilian Drive, Suite B
Goleta, CA 93117
Main	  +1 805-965-8000 or +1 877-429-1553 (US only)
Support	  +1 805-965-8000 or +1 805-883-6097

avionics.support@abaco.com (email)
https://www.abaco.com/products/avionics

Additional Resources

For more information, visit the Abaco Systems website at:

www.abaco.com
