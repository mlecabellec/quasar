; $URL: http://subversion:8080/svn/gsc/trunk/drivers/LINUX/OPTO16X16/OPTO16X16_Linux_1.x.x.x_GSC_DN/doc/release.txt $
; $Rev: 53733 $
; $Date: 2023-09-14 11:03:12 -0500 (Thu, 14 Sep 2023) $

OPTO16X16: Linux Driver Release Notes

Revision History
================

--------------------------------------------------------------------------------

Version 2.6.104.47.0, Released 9/14/2023

driver: Updated to support the 6.x series kernel.
driver: Updated comments for consistency.
driver: Added global driver unloading flag.
driver: Added "unloading" message when unload service is called.
driver: Updated for changes after the 5.17.15 kernel.
driver: Updated to support the 6.x kernel.
driver: Updated some comments for consistency.
driver: White space cleanup.
driver: Updated for changes to Red Hat Enterprise Linux 8.6.

--------------------------------------------------------------------------------

Version 2.5.100.42.0, Released 7/14/2022

driver: LINTed sources.
driver: Updated to support segregation of PLX specific sources.
driver: Updated comments for consistency.
driver: Removed unintended debug output statements.
driver: Renamed gsc_irq_reset_pci to gsc_irq_cpi_reset for consistency.
driver: Segregated additional PLX specific code.
driver: Updated system message to begin with the driver module name.
driver: Began implementation for MSI support.
driver: Segregated all PLX specific code to accommodate alternate device implementations.
driver: Updated debugging display output.
driver: Added temporary experimental write code in gsc_write.c for performance testing.
driver: The code is partially retained but is not included for compilation.
driver: Fixed a DMA bug relating to the use of a timeout setting of zero.
driver: Added the os_irq_t.created field.
driver: Updated os_irq_create, destroy, open and close services.
driver: Removed unused debugging messages.
driver: Began implementing MSI support.
driver: Added macro DEV_IRQ_SHOW to report assigned IRQ assigned to device.
driver: Removed unused macros.
driver: Updated for the 5.14 kernel.
driver: Made spelling corrections in version notes.
driver: Changed all printk instances to printf to support porting activities.
driver: Expanded files removed for a clean operation.
driver: Updated to support the 5.9 kernel.
driver: Modified os_common.h so application code compiles under Cygwin.
driver: Reduced the minimum tick sleep from 1 to 0 ticks.

--------------------------------------------------------------------------------

Version 2.4.93.36.0, Released 3/5/2021

driver: Corrected endian error message.
driver: Added Endianess support for the PEX8111 and PEX8112.
driver: Fixed a timeout bug in gsc_write_pio_work_32_bit().
driver: Modified debug specific register access code to enhance usage.

--------------------------------------------------------------------------------

Version 2.4.91.35.0, Released 11/13/2020

driver: Fixed code in which open succeeds even if initialization fails.
driver: Updated for porting to Windows.
driver: Removed DMA code as it is unused.
driver: Updated IRQ code for improved clarity and modularity.
driver: Updated DMA code to support multiple DMA implementations.
driver: Removed I/O debug code.
driver: Removed compiler warnings under Windows.
driver: Fixed a IOCTL bug in which alt->sem wasn't being unlocked.
driver: Increased modularization for porting effort to another OS.
driver: Made DMA code more modular.
driver: Improvved Red Hat Enterprise Linux 8.x detection logic.
driver: Added support under the 4.x kernel for Red Hat Enterprise Linux 8.x.
driver: Added validation checking of the interrupt number in os_irq_open().
driver: Updated the /proc/ code for changes in the 5.6.6 kernel.
driver: Updated memory code for improved clarity and modularity.
driver: Code cleanup in open service.
driver: Fixed open bug applicable to multi-board devices.
driver: Made mods to accommodatedate porting to another OS.

--------------------------------------------------------------------------------

Version 2.3.87.28.0, Released 8/12/2019

driver: Added support for the 5.x kernel series.
driver: Added Endianness support.
driver: Updated initial file content for consistency.
driver: Added support for Big Endian hosts.
driver: Updated per OS specific DMA memory allocation interface.
driver: Fixed bug in gsc_dma_perform(): timeouts were being ignored.
driver: Fixed bug in gsc_dma_perform(): the timeout detection logic was incorrect.
driver: Improved register validation.
driver: Subsystem Vendor ID and Subsystem ID can each be ignored if -1 in device table.
driver: #define for GSC_REG_ENCODE_MASK is moved here from gsc_reg.c.
driver: Enhanced error reporting for the process of validating register definitions.
driver: Fixed bug in DMA completion code.
driver: Updated initialization for the write service.
driver: Added DMA support for an IOMMU.
driver: Added error reporting when DMA memory cound not be allocated.
driver: Reduced code included when read and writ are both unsupported.
driver: Added error reporting when IRQ cound not be acquired during open requests.
driver: Some minor code reorganization.
driver: Updated BAR creation logic.

--------------------------------------------------------------------------------

Version 2.2.81.26.1, Released 3/1/2019

driver: Corrected release date in this file.

--------------------------------------------------------------------------------

Version 2.2.81.26.0, Released 12/10/2019

driver: Bug fix: was ignoring BAR setup return value.
driver: Updated per changes to the OS specific PCI services.
driver: Made updates for DEV_SUPPORTS_XXX macro changes.
driver: Modified code so open succeeds even if initialization fails.
driver: Defined macros for the WAIT services.
driver: Updated muti-channel ISR code for new I/O streams structure.
driver: DEV_WAIT_IO_ALL is now required if WAIT is supported along with READ or WRITE
driver: I/O WAIT macros are now defined by the device API and are passed to GSC code in dev_io_t.
driver: Updated Block Mode DMA macro name (_DMA to _BMDMA).
driver: Added I/O, DMA and register access debug code.
driver: Added stream selection field in the "size" argument for the read and writecalls.
driver: Added OS IRQ calls: os_irq_create() and os_irq_destroy()
driver: Renamed field in gsc_irq_t for clarity.
driver: Fixed a bug in which wait list node removal didn't always have the list locked.
driver: Added support for some DMA metrics.
driver: Improved IOCTL argument validation.
driver: Moved a typedef to device specific code.
driver: Udated some utility services: applying a setting, end by reading it back
driver: Updated for support of some drivers under older kernels.
driver: Updated #include files for consistancy.
driver: Fixed a DMA timeout calculation bug.
driver: Updated to accommodate porting to Windows KMDF.
driver: Updated per changes to the low level register interface.
driver: Updated the driver initialization logic.
driver: Updated IOCTL init and reset code.
driver: Added support to exclude the WAIT feature.
driver: Updated macros to include/exclude IRQ support.
driver: Fixed bug in init code where last PCI device is one of ours.
driver: Fixed register definitions for the PEX8111 and PEX8112.
driver: Implemented support for a stream selection field in the I/O bytes argument.
driver: Implemented register access debug code.
driver: Implemented calls: os_irq_create() and os_irq_destroy()
driver: Field in gsc_irq_t renamed for clarity.
driver: Changed macro name for clarity.
driver: Updated to accomodate Fedora 27.
driver: Updated the low level register interface.

--------------------------------------------------------------------------------

Version 2.1.68.18.0, Released 12/6/2016

driver: The BAR code has been updated to include the data under a single structure.
driver: The register definitions have been updated.
driver: I/O services now pass around an os_mem_t structure instead of a buffer pointer.
driver: White space cleanup.
driver: Changed the arbitrary wait event callback argument to a void* type.
driver: Modified to allow multiple apps to simultaneously access a single device.
driver: Correct access to BAR0 and BAR1 (is RO, was RW).
driver: Corrected the IOCTL code for the register write and mod services.
driver: Added special case for register I/O where register id value is 0.
driver: Added support for inifinite I/O timeout.
driver: Improved response to being signalled (i.e. being told to abort).
driver: An event wait timeout value of zero now means do not timeout.
driver: Fixed an I/O bug.
driver: Updated the version number macros.
driver: Updated the format and encoding of register macros.
driver: Fixed DMA bug.
driver: Moved some BAR functionality to the OS specific code.
driver: I/O now passes around an os_mem_t structure instead of a buffer pointer.
driver: Copying to and from user space is now done with more use specific routines.
driver: Made more ISR functionality subject to the GSC_IRQ_ISR_FLAG_DETECT_ONLY flag.
driver: Dropped I/O register access services.
driver: Performed some LINTing.
driver: Simplified error messages.
driver: Fixed ul2hex().
driver: The macro S32_MAX is defined only if not already done so.
driver: Added the utility service ul2hex().
driver: Changed register offsets to u16 from unsigned long.
driver: Changed printk's to printf's.
driver: Made ISR access more OS agnostic.
driver: Made PCI registers accessible from inside an ISR.
driver: Added special case handling for reads of register id value 0.
driver: Added support for reporting metrics information during driver installation.
driver: Removed use of function check_mem_region() in 4.x kernels.
driver: Implemented support for the 4.x kernels.
driver: Added checks on some pointers before using them.
driver: Added safety check in EVENT_RESUME_IRQ().
driver: Removed unused macro (OS_CAST_VOIDP_TO_U32).
driver: Moved some BAR functionality here from more common code.
driver: Renamed os_event_cleanup() to os_event_destroy().
driver: Simplified use of os_mem_t structures and content.
driver: Removed the use of __DATE__ and __TIME__.

--------------------------------------------------------------------------------

Version 2.0.60.8.0, Released 9/16/2015

driver: Updated to use the newer common driver sources.
driver: Removed GNU notice from non-Linux specific files.
driver: Removed Linux specific content from non-Linux specific source files.
driver: Now using a spinlock rather than enabling and disabling interrupts.
driver: Updated gsc_irq_open() and gsc_irq_close().
driver: Updated gsc_dma_open() and gsc_dma_close().
docsrc: Updated per changes to the device node name, which is now /dev/<device>.X.
din: Renamed one or more variables.
dout: Renamed one or more variables.
LINTed various sources.
White space cleanup.

--------------------------------------------------------------------------------

Version 1.5.52.0, Released 2/28/2014

Driver: Reduced #include list in driver interface header.
Additional LINTing.
White space cleanup.

--------------------------------------------------------------------------------

Version 1.4.51.0, Released 1/9/2014

Driver: Modified the conditional definition of flags used by kmalloc().
Driver: Updated /proc file support for the 3.10 kernel changes.
Driver: Additional porting for the 2.2 kernel.

--------------------------------------------------------------------------------

Version 1.4.48.0, Released 11/8/2013

Driver: The IOCTL command code is now treated as an integer.
Driver: Numerous minor changes for LINTing of the code.

--------------------------------------------------------------------------------

Version 1.4.45.0, Released 7/18/2013

Driver: Freeing the board interrupt is now conditioned upon it being acquired.
Driver: Corrected definition of register GSC_PLX_9056_PABTADR.
Driver: Added support for the Bus Abort interrupt.
Driver: Updated DMA reads to improve performance.

--------------------------------------------------------------------------------

Version 1.4.42.0, Released 5/11/2013

Driver: Updated for the 3.x kernel.
Driver: Changed how I/O buffers are allocated.
Driver: Changed how s8 ... u32 are included.
Driver: Enhanced the IOCTL service code to accommodate unsupported services.
Driver: Updated the BAR mapping failure messages.
Driver: Added s8 ... u32 definitions for application use.
Driver: Updated gsc_dma_destroy() - now zero fills memory when done.
Driver: Updated gsc_irq_destroy() - does cleanup when done.

--------------------------------------------------------------------------------

Version 1.3.39.0, Released 7/24/2012

Driver: Updated for the 3.x kernel.
Driver: Added support for boards that need additional setup after a DMA channel has been selected.
Driver: Made the IOCTL buffer larger - 512 bytes.
Updated the parameter list to gsc_id_driver().

--------------------------------------------------------------------------------

Version 1.3.35.0, Released 1/10/2012

Driver: BAR0 and BAR2 are now the only BAR regions used.
Driver: Include all common source, though not all are used.
Split the utility code into two libraries: common and device specific.

--------------------------------------------------------------------------------

Version 1.2.32.0, Released 11/15/2011

Driver: Modified driver start script to correct messages under Ubuntu.
Driver: Updated the set of IOCTL services.
Driver: Changed use of DEV_SUPPORTS_READ macro.
Driver: Changed use of DEV_SUPPORTS_WRITE macro.
Driver: Changed use of DEV_IO_AUTO_START macro.
Driver: Eliminated the global dev_check_id() routine.
Driver: Fixed a bug in the GSC_INTCSR_MAILBOX_INT_ACTIVE macro.
Driver: Removed a compiler warning under Fedora 15.
Driver: Added #defines for D0 through D31.
Driver: Modified gsc_sem_t to prevent hanging on an uninitialized structure.
Driver: Moved dev_check_id() functionality to dev_device_create().
Driver: Added support for deprication of file_ops.ioctl.
Driver: Started PLX EEPROM access support.
Driver: Modified so BAR2 can now be memory or I/O mapped.
Driver: Corrected the _1M macro.
Driver: Removed compiler warning in Fedora 12: reduced module_init stack usage.
Driver: Removed remove_proc_entry() call from proc_start - fix for Fedora 14.
Driver: Fixed a bug in gsc_ioctl_init().
Driver: Added common PIO read and write routines.
Driver: Changed use of DEV_SUPPORTS_PROC_ID_STR macro.
Driver: Added initial support for Vital Product Data.
id: Corrected output spelling.
id: Updated the register output data.
Updated numerous sources per changes in the set of supported IOCTL services.
Modified makefiles to correct messages under Ubuntu.

--------------------------------------------------------------------------------

Version 1.1.17.0, Released 6/29/2010

Driver: The subsystem id search criteria has been changed to match the board.

--------------------------------------------------------------------------------

Version 1.0-BETA.17.0, Released 6/24/2010

Initial release.
Driver: This version of the driver uses a temporary subsystem id value. Once a
	proper id value is obtained from PLX Technologies a non-beta release will be
	produced.

--------------------------------------------------------------------------------
