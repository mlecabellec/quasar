; $URL: http://subversion:8080/svn/gsc/trunk/drivers/LINUX/16AI64SSA/doc/release.txt $
; $Rev: 54972 $
; $Date: 2024-08-07 16:08:29 -0500 (Wed, 07 Aug 2024) $

16AI64SSA: Linux Driver Release Notes

Revision History
================

--------------------------------------------------------------------------------

Version 3.12.111.50.0, Released 8/7/2024

driver: Updated for Fedora 38.
driver: Updated build scripts for consistency.
driver: Corrected error message text.
driver: Updated the Rx Debug support.
driver: Remove Red Hat 8 compiler warning (2.4 kernel).
driver: Corrected log message when excusive open request fails.
driver: White space cleanup.
driver: Fixed an issue where the register id is zero (for testing purposes).
driver: Updated and expanded error reporting.
driver: Corrected a comment.
driver: LINTed the sources for the 2.4 kernel builds.
driver: LINTed sources.
driver: Updated to address Fedora 38 complaints.

--------------------------------------------------------------------------------

Version 3.12.104.47.0, Released 8/8/2023

driver: Updated to support the 6.x series kernel.
driver: Renamed all Auto_Cal content to Autocal.
driver: Renamed all Auto_Cal_Sts content to Autocal_Status.
driver: Updated comments for consistency.
driver: Updated the Initialize IOCTL service for consistency.
driver: Updated the Autocal IOCTL service for consistency.
driver: Updated the Input Buffer Clear IOCTL service for consistency.
driver: Added RX DEBUG capabilities.
driver: Added global driver unloading flag.
driver: Added "unloading" message when unload service is called.
driver: Updated for changes after the 5.17.15 kernel.
driver: Updated to support the 6.x kernel.
driver: Updated some comments for consistency.
driver: White space cleanup.
driver: Updated for changes to Red Hat Enterprise Linux 8.6.

--------------------------------------------------------------------------------

Version 3.11.100.42.0, Released 7/12/2022

driver: Standardized various IOCTL system log messages.
driver: Standardized processing of the initialization IOCTL service.
driver: Standardized processing of the autocalibration IOCTL service.
driver: Removed unintended debug output statements.
driver: Renamed gsc_irq_reset_pci to gsc_irq_cpi_reset for consistency.
driver: Segregated additional PLX specific code.
driver: Updated system message to begin with the driver module name.
driver: Began implementation for MSI support.
driver: Segregated all PLX specific code to accommodate alternate device implementations.
driver: Updated debugging display output.
driver: LINTed sources.
driver: Added temporary experimental write code in gsc_write.c for performance testing.
driver: The code is partially retained but is not included for compilation.
driver: Fixed a DMA bug relating to the use of a timeout setting of zero.
driver: Corrected endian error message.
driver: Added Endianess support for the PEX8111 and PEX8112.
driver: Fixed a timeout bug in gsc_write_pio_work_32_bit().
driver: Added the os_irq_t.created field.
driver: Updated os_irq_create, destroy, open and close services.
driver: Removed unused debugging messages.
driver: Began implementing MSI support.
driver: Added macro DEV_IRQ_SHOW to report assigned IRQ assigned to device.
driver: Removed unused macros.
driver: Updated for the 5.14 kernel.
driver: Made spelling corrections in version notes.
driver: Changed all printk instances to printf to support porting activities.
driver: Expanded files removed for a clean operation.
driver: Updated to support the 5.9 kernel.
driver: Modified os_common.h so application code compiles under Cygwin.
driver: Reduced the minimum tick sleep from 1 to 0 ticks.
driver: Modified debug specific register access code to enhance usage.

--------------------------------------------------------------------------------

Version 3.10.91.35.0, Released 10/22/2020

driver: Updated initial file content for consistency.
driver: Added Endianness support.
driver: Updated for porting to Windows.
driver: Added support for the 5.x kernel series.
driver: Deleted useless code in ioctl.c.
driver: Updated some comments for consistency.
driver: Improved Red Hat Enterprise Linux 8.x detection logic.
driver: Added support under the 4.x kernel for Red Hat Enterprise Linux 8.x.

--------------------------------------------------------------------------------

Version 3.9.91.33.0, Released 9/30/2020

driver: Updated IRQ code for improved clarity and modularity.
driver: Updated DMA code to support multiple DMA implementations.
driver: Removed I/O debug code.
driver: Fixed a IOCTL bug in which alt->sem wasn't being unlocked.
driver: Increased modularization for porting effort to another OS.
driver: Made DMA code more modular.
driver: Added support for Big Endian hosts.
driver: Updated per OS specific DMA memory allocation interface.
driver: Added validation checking of the interrupt number in os_irq_open().
driver: Updated the /proc/ code for changes in the 5.6.6 kernel.
driver: Updated memory code for improved clarity and modularity.
driver: Code cleanup in open service.
driver: Fixed open bug applicable to multi-board devices.
driver: Made mods to accommodatedate porting to another OS.
driver: Added support for the 5.x kernel series.
driver: Added DMA support for an IOMMU.
driver: Added error reporting when DMA memory cound not be allocated.
driver: Reduced code included when read and writ are both unsupported.
driver: Added error reporting when IRQ cound not be acquired during open requests.
driver: Some minor code reorganization.

--------------------------------------------------------------------------------

Version 3.9.85.27.0, Released 5/2/2019

driver: Corrected comment in main.h.
driver: Fixed bug in gsc_dma_perform(): timeouts were being ignored.
driver: Fixed bug in gsc_dma_perform(): the timeout detection logic was incorrect.
driver: Improved register validation.
driver: Subsystem Vendor ID and Subsystem ID can each be ignored if -1 in device table.
driver: #define for GSC_REG_ENCODE_MASK is moved here from gsc_reg.c.
driver: Enhanced error reporting for the process of validating register definitions.
driver: Fixed bug in DMA completion code.
driver: Updated initialization for the write service.
driver: Updated muti-channel ISR code for new I/O streams structure.
driver: Updated BAR creation logic.

--------------------------------------------------------------------------------

Version 3.8.80.26.0, Released 8/31/2018

driver: Updated per changes to common code.
driver: Modified code so open succeeds even if initialization fails.
driver: DEV_WAIT_IO_ALL is now required if WAIT is supported along with READ or WRITE
driver: I/O WAIT macros are now defined by the device API and are passed to GSC code in dev_io_t.
driver: Updated Block Mode DMA macro name (_DMA to _BMDMA).
driver: Added I/O, DMA and register access debug code.
driver: Added stream selection field in the "size" argument for the read and writecalls.
driver: Added OS IRQ calls: os_irq_create() and os_irq_destroy()
driver: Renamed field in gsc_irq_t for clarity.
driver: Fixed a bug in which wait list node removal didn't always have the list locked.
driver: Added support for some DMA metrics.
driver: Improved IOCTL argument validation.
driver: Moved a typedef to device specific code.
driver: Udated some utility services: applying a setting, end by reading it back
driver: Implemented support for a stream selection field in the I/O bytes argument.
driver: Implemented register access debug code.
driver: Implemented calls: os_irq_create() and os_irq_destroy()
driver: Field in gsc_irq_t renamed for clarity.
driver: Changed macro name for clarity.

--------------------------------------------------------------------------------

Version 3.7.74.21.0, Released 2/27/2018

driver: Updated for support of some drivers under older kernels.
driver: Updated to accomodate Fedora 27.

--------------------------------------------------------------------------------

Version 3.7.72.20.0, Released 9/11/2017

driver: Fixed a DMA timeout calculation bug.

--------------------------------------------------------------------------------

Version 3.7.71.20.0, Released 8/28/2017

driver: Bug fix: was ignoring BAR setup return value.
driver: Updated per changes to the OS specific PCI services.
driver: Made updates for DEV_SUPPORTS_XXX macro changes.
driver: Added some internal documentation.
driver: Updated to accommodate porting to Windows KMDF.
driver: Updated per changes to the low level register interface.
driver: Updated the driver initialization logic.
driver: Updated IOCTL init and reset code.
driver: Added support to exclude the WAIT feature.
driver: Updated macros to include/exclude IRQ support.
driver: Fixed bug in init code where last PCI device is one of ours.
driver: Fixed register definitions for the PEX8111 and PEX8112.
driver: Updated the low level register interface.

--------------------------------------------------------------------------------

Version 3.6.68.18.0, Released 11/8/2016

driver: Added an infinite I/O timeout option.
driver: Added conditional reporting of device metrics during driver startup.
driver: Corrected the IOCTL code for the register write and mod services.
driver: Improved response to being signalled (i.e. being told to abort).
vrange: added sample application to archive

--------------------------------------------------------------------------------

Version 3.5.67.17.0, Released 10/14/2016

driver: Correct access to BAR0 and BAR1 (is RO, was RW).
driver: Corrected FIFO size computation.

--------------------------------------------------------------------------------

Version 3.4.67.17.0, Released 9/28/2016

driver: Improved ISR's handling of interrupts, especially for firmware with the irq anomaly.
driver: Improved ISR's handling of interrupts, especially for firmware with the irq anomaly.
driver: Corrected spelling of variable "anomaly".
driver: Added query options AI64SSA_QUERY_CHAN_RANGE, AI64SSA_QUERY_REG_ACAR and AI64SSA_QUERY_IRQ1_BUF_ERROR.
irq: Added this sample application to the release.
wait: Added this sample application to the release.

--------------------------------------------------------------------------------

Version 3.3.67.17.0, Released 9/22/2016

driver: The BAR code has been updated to include the data under a single structure.
driver: The register definitions have been updated.
driver: I/O services now pass around an os_mem_t structure instead of a buffer pointer.
driver: White space cleanup.
driver: Changed the arbitrary wait event callback argument to a void* type.
driver: Modified to allow multiple apps to simultaneously access a single device.
driver: An event wait timeout value of zero now means do not timeout.
driver: Fixed an I/O bug.
driver: Updated the version number macros.
driver: Updated the format and encoding of register macros.
driver: Removed use of function check_mem_region() in 4.x kernels.
driver: Implemented support for the 4.x kernels.
driver: Added checks on some pointers before using them.
driver: An event wait timeout value of zero now means do not timeout.
driver: Modified to allow multiple apps to simultaneously access a single device.
driver: Added safety check in EVENT_RESUME_IRQ().

--------------------------------------------------------------------------------

Version 3.2.65.13.0, Released 3/26/2016

driver: DMA bug fix.

--------------------------------------------------------------------------------

Version 3.2.64.12.0, Released 1/21/2016

driver: White space cleanup.

--------------------------------------------------------------------------------

Version 3.1.64.12.0, Released 11/11/2015

driver: Removed the "built" entry from the /proc file.
driver: I/O code now passes an os_mem_t structure rather than a buffer pointer.
driver: Thread arguments are not void* data types.
driver: Moved some BAR functionality to the OS specific code.
driver: Copying to and from user space is now done with more use specific routines.
driver: Made more ISR functionality subject to the GSC_IRQ_ISR_FLAG_DETECT_ONLY flag.
driver: Dropped I/O register access services.
driver: Performed some LINTing.
driver: Simplified error messages.
driver: Fixed ul2hex().
driver: The macro S32_MAX is defined only if not already done so.
driver: Added the utility service ul2hex().
driver: Changed register offsets to u16 from unsigned long.
driver: Changed printk's to printf's.
driver: Made ISR access more OS agnostic.
driver: Made PCI registers accessible from inside an ISR.
driver: Moved some BAR functionality here from more common code.
driver: Renamed os_event_cleanup() to os_event_destroy().
driver: Simplified use of os_mem_t structures and content.
driver: Removed the use of __DATE__ and __TIME__.
stream: added this application to the release

--------------------------------------------------------------------------------

Version 3.0.60.8.0, Released 9/11/2015

driver: Updated to use the newer common driver sources.
driver: Removed GNU notice from non-Linux specific files.
driver: Removed Linux specific content from non-Linux specific source files.
Driver: Modified Low Latency Read requests for 32-channel boards.
driver: Now using a spinlock rather than enabling and disabling interrupts.
driver: Updated gsc_irq_open() and gsc_irq_close().
driver: Updated gsc_dma_open() and gsc_dma_close().
Updated the I/O buffer size.
docsrc: Updated per changes to the device node name, which is now /dev/<device>.X.
Added a "verbose" argument ot the utility sources.
Added support for the Low Latency Control Register.
fsamp: Fixed some typographic errors.
id: Added support for the Low Latency feature and the LLCR.
rxrate: Updated the main data output loop.
rxrate: Updated the displayed output.
LINTed various sources.
White space cleanup.

--------------------------------------------------------------------------------

Version 2.9.57.0, Released 10/23/2014

driver: Now using the globally common file gsc_common.h.
driver: Removed dead code (i.e. excluded by #if 0).
driver: Removed additional compiler warnings.
driver: Additional LINTing.
rxrate: Added more read initialization code.

--------------------------------------------------------------------------------

Version 2.9.52.0, Released 2/26/2014

Driver: Reduced #include list in driver interface header.
Additional LINTing.
White space cleanup.

--------------------------------------------------------------------------------

Version 2.8.51.0, Released 1/8/2014

Driver: Modified the conditional definition of flags used by kmalloc().
Driver: Updated /proc file support for the 3.10 kernel changes.
Driver: Additional porting for the 2.2 kernel.

--------------------------------------------------------------------------------

Version 2.8.49.0, Released 11/13/2013

Driver: Added support for Abort Interrupt processing on 9080 based boards.
Driver: Enhanced DMA error handling for Abort Interrupts.
Driver: The IOCTL command code is now treated as an integer.
Driver: Numerous minor changes for LINTing of the code.

--------------------------------------------------------------------------------

Version 2.8.45.0, Released 7/3/2013

Driver: Freeing the board interrupt is now conditioned upon it being acquired.
Driver: Corrected definition of register GSC_PLX_9056_PABTADR.
Driver: Added support for the Bus Abort interrupt.
Driver: Updated DMA reads to improve performance.

--------------------------------------------------------------------------------

Version 2.8.42.0, Released 5/11/2013

Driver: Changed how I/O buffers are allocated.
Driver: Changed how s8 ... u32 are included.
Driver: Enhanced the IOCTL service code to accommodate unsupported services.
Driver: Updated the BAR mapping failure messages.
Driver: Added s8 ... u32 definitions for application use.
Driver: Updated gsc_dma_destroy() - now zero fills memory when done.
Driver: Updated gsc_irq_destroy() - does cleanup when done.

--------------------------------------------------------------------------------

Version 2.8.39.0, Released 9/11/2012

Driver: Corrected the definitions of the Voltage Range macros.
Added Voltage Range selection to util_config_ai.c.

--------------------------------------------------------------------------------

Version 2.7.39.0, Released 7/18/2012

Driver: Corrected a jiffies roll over bug in ioctl.c and device.c.
Driver: Added support for boards that need additional setup after a DMA channel has been selected.
Driver: Made the IOCTL buffer larger - 512 bytes.
Updated the parameter list to gsc_id_driver().

-------------------------------------------------------------------------------

Version 2.6.37.0, Released March 30, 2012

Driver: Removed extraneous debug messages.

-------------------------------------------------------------------------------

Version 2.5.37.0, Released March 29, 2012

Driver: Updated for the 3.x kernel.
Driver: Modified ISR to work with ICR anomily of pre-222 firmware.
regs: Fixed Mod By Name and Mod By Offset to account for Low Latency regs.
regs: Fixed segmentation fault.
Updated the makefile for consistency.

-------------------------------------------------------------------------------

Version 2.4.34.0, Released December 15, 2011

Split the utility code into two libraries: common and device specific.
slowrate: Removed from release.
testapp: Removed from release.

-------------------------------------------------------------------------------

Version 2.3.33.0, Released December 8, 2011

Driver: Corrected a bug that prevented DMDMA from being used.

-------------------------------------------------------------------------------

Version 2.2.30.0, Released October 30, 2011

Driver: Removed compiler warnings for Fedora 15.
Driver: Fixed a bug in the GSC_INTCSR_MAILBOX_INT_ACTIVE macro.
id: Corrected output spelling.
signals: Corrected output spelling.
slowrate: Removed compiler warnings for Fedora 15.
testapp: Removed compiler warnings for Fedora 15.

-------------------------------------------------------------------------------

Version 2.1.28.0, Released July 27, 2011

Driver: Removed debug code from irq.c.
utils: Changed nrate argument in ai64ssa_config_ai() to fsamp.
savedata: Updated per ai64ssa_config_ai() change.
rxrate: Made application opperational.

-------------------------------------------------------------------------------

Version 2.0.28.0, Released July 26, 2011

Overhauled driver and sample applications.

-------------------------------------------------------------------------------

Version 1.2.0, Released August 8, 2009

Ported to 2.6.27 kernel (Red Hat Fedora Core 10).

-------------------------------------------------------------------------------

Version 1.1.1, Released October 6, 2008

Added the cable_sync sample application.

-------------------------------------------------------------------------------

Version 1.1.0, Released March 27, 2008

Fixed a read bug that appears when doing DMA under low conversion rates.
Numerous changes to the user manual.
Added the docsrc subdirectory.

-------------------------------------------------------------------------------

Version 1.0.2, Released October 10, 2007

Modified to support kernels through 2.6.21 from Red Hat Fedore Core 7.

-------------------------------------------------------------------------------

Version 1.0.1, Released March 15, 2006

Fixed bug preventing full buffer return in fill buffer mode.
Removed IOCTL_DEVICE_SS_MODE_CONFIG from the manual.

-------------------------------------------------------------------------------

Version 1.0.0, Released March 14, 2006

Initial release.

-------------------------------------------------------------------------------

