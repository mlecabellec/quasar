bash-2.02$ pwd
/yg/drivers/asdc/test
bash-2.02$ initabie /dev/asdc1
Tentative d'arret de toutes les taches ... 
Sleep ... ...
OK !

Parametres initiaux :
   Taille tampon ITs             = 4
   Taille tampon espion          = 100
   Masque pour IT sur status BC  = 0x0000
   Intermessage gap time pour BC = 270
   Nbre de reprises pour BC      = 1
   Bus a utiliser pour reprises  = 0x0000
   Temps de reponse maxi RT      = 300
   Temps de reponse RT simules   = 120

Modification de ces parametres :
   Taille tampon ITs             = 20
   Taille tampon espion          = 10000
CSR : 0x0000 --> 0x0008
C'est fini !
bash-2.02$ 



bash-2.02$ cplasdc /dev/asdc1 eflux2.rtl
CPLASDC - V3.1 du 2 aout 2001
bash-2.02$ 



bash-2.02$ eflux4 /dev/asdc1 1250 100000

    periode = 1250
nombre_exec = 100000 ==> duree trame = 125 s
--- Fin definition des tranferts ---
--- Fin programmation periodicite de la trame ---

Debut trame = 0x6236
Dernier bloc = 0x62B6

Periode = 1250 us
Cycles = 100000

 Presser CR pour definir les fluxs ...
Adresse flux #1 = 0x6246
 Presser CR pour chargement preliminaire des tampons materiels ...
 Presser CR pour executer la trame ...







bash-2.02$ cd monabi
bash-2.02$ pwd
/yg/drivers/asdc/test/monabi
bash-2.02$ monabi /a/yg/E.dat

MONABI - Version 3.0 du 3/8/2001

   ---> device =  "/dev/asdc1"
   ---> fichier = "/a/yg/E.dat"

Carte ABIPMC2, firmware F203/0002
 -1-  -3- SMBCNT = 0xF821
Compteur bloc : Numtamp = 0xF820
Compteur bloc : zone[n] = 0xF820
 -1-  -3- SMBCNT = 0xF821
Compteur bloc : Numtamp = 0xF820
Compteur bloc : zone[n] = 0xF820
 -1-  -3- SMBCNT = 0xF821
Compteur bloc : Numtamp = 0xF820
Compteur bloc : zone[n] = 0xF820
 -1-  -3- SMBCNT = 0xF821
Compteur bloc : Numtamp = 0xF820
Compteur bloc : zone[n] = 0xF820
 -1-  -3- SMBCNT = 0xF821
 . . . . . . .
Compteur bloc : Numtamp = 0xF820
Compteur bloc : zone[n] = 0xF820
 -1-  -3- SMBCNT = 0xF821
Compteur bloc : Numtamp = 0xF820
Compteur bloc : zone[n] = 0xF820
 -1- ^C -2-  -1-  -3- SMBCNT = 0x0001
Compteur bloc : Numtamp = 0x0000
Compteur bloc : zone[n] = 0x0000
bash-2.02$ 



bash-2.02$ exam </a/yg/E.dat >/a/yg/E.txt
*** Tampon(s) ABI perdu(s) ! ***
numtamp=1   i=63520
*** Tampon(s) ABI perdu(s) ! ***
numtamp=63521   i=63520
*** Tampon(s) ABI perdu(s) ! ***
numtamp=63521   i=63520
*** Tampon(s) ABI perdu(s) ! ***
numtamp=63521   i=63520
 . . . . . . .
*** Tampon(s) ABI perdu(s) ! ***
numtamp=63521   i=63520
*** Tampon(s) ABI perdu(s) ! ***
numtamp=63521   i=63520
*** Tampon(s) ABI perdu(s) ! ***
numtamp=63521   i=0
bash-2.02$ 







bash-2.02$ alimflux /dev/asdc1 6246 /a/yg/don4.bin /a/yg/S.bin
Nombre de tampons dispos : 500 en entree et 500 en sortie

ATTENTION : Les tampons materiels des transferts BCRT de ce flux
            doivent avoir ete initialises par l'application ayant
            ce flux !

            Dans le cas contraire, le premier message emis par
            chacun des blocs BC de type BCRT contiendra des 
            donnees imprevisibles ...

 Initialisation achevee, pret a traiter ! ...
On y va !
C'est fini !
bash-2.02$ 

bash-2.02$ tradon </a/yg/S.bin >/a/yg/S.txt
bash-2.02$ 
bash-2.02$ 
bash-2.02$ pwd
/yg/drivers/asdc/test
bash-2.02$ perl verif4a.pl /a/yg/S.txt
ATTENTION : controle sur 100000 cycles ...
bash-2.02$ 
bash-2.02$ 









bash-2.02$ 
bash-2.02$ visuflux /dev/asdc1


Flux BC de '/dev/asdc1' : 

nb open =                 589505315
nb ITs =                  589505315
monok =                   589505315
fin bc =                  1
stocke bc =               589505315

nb tampons fluxs =        11904
nb tampons fluxs dispos = 10904
premier flux =            0x6246
dernier flux =            0x6246


Chaine des flux :
-----------------------------------------
  0 - 0x6246 : 0x0001 ==> BC->RT
         0x20E2  commande   (BC --> RT4,7    N=2)
      0x627E : 0x0002 ==> RT->BC
         0x250F  commande   (RT4,8 --> BC    N=15)
      0x62B6 : 0x0002 ==> RT->BC
         0x252F  commande   (RT4,9 --> BC    N=15)
                nmte = 500
                ncte = 0
                nlte = 250
                nmts = 500
                ncts = 0
                nlts = 250

Nb erreurs flux = 0

-----------------------------------------

bash-2.02$ 







bash-2.02$ 
bash-2.02$ 
bash-2.02$ histoit /dev/asdc1
Taille du tampon des ITs = 20
Nombre d'ITs physiques enregistrees = 300485

     0      0
     1  300466
     2     19
     3      0
     4      0
     5      0
     6      0
     7      0
     8      0
     9      0
    10      0
    11      0
    12      0
    13      0
    14      0
    15      0
    16      0
    17      0
    18      0
    19      0
    20      0
    21      0
    22      0
    23      0
    24      0
    25      0
 . . . . . . .
   195      0
   196      0
   197      0
   198      0
   199      0
Debordement : 0


bash-2.02$ 




