# Feature 0020

## Title

Provide a set of C++ classes allowing to build trees or graphs of named objects.

## Description

The following capabilities and features shall be provided:

- [FE-0020.1] Provide a "NamedObject" class.
    - [FE-0020.1.1] The class shall have a "name" property that shall be initialized at construction time.
      - [FE-0020.1.1.1] The given name shall be a non empty string.
      - [FE-0020.1.1.2] The given name shall be unique within the parent object.
      - [FE-0020.1.1.3] The given name shall be match the regular expression "^[a-zA-Z_][a-zA-Z0-9_]*$".
    - [FE-0020.1.2] The class shall have an optional "parent" property.
      - [FE-0020.1.2.1] A parent may be provided at construction time or set later.
      - [FE-0020.1.2.2] When a parent is set, the name shall be added to the parent's children list.
      - [FE-0020.1.2.3] If the name is not unique within the new parent, the operation shall fail (e.g. throw an exception).
    - [FE-0020.1.3] The lifecycle of the object shall be managed by the parent object via strong references.
      - [FE-0020.1.3.1] The parent shall hold a strong reference (e.g. std::shared_ptr) to its children.
      - [FE-0020.1.3.2] When the parent is destroyed, it releases the references to its children.
      - [FE-0020.1.3.3] When a parent is set, the child is added to the parent's children list.
      - [FE-0020.1.3.4] When a parent is unset, the child is removed from the parent's children list.
  - [FE-0020.2] The NamedObject class shall provide methods for comparison.
    - [FE-0020.2.1] The comparison shall be based on the name property.
    - [FE-0020.2.2] The comparison shall be case sensitive.
    - [FE-0020.2.3] The comparison shall be lexicographical
  - [FE-0020.3] The NamedObject class shall provide getter methods for
    - [FE-0020.3.1] the parent property.
    - [FE-0020.3.2] the name property.
    - [FE-0020.3.3] the children property.
    - [FE-0020.3.4] the siblings property.
    - [FE-0020.3.5] the previous sibling property.
    - [FE-0020.3.6] the next sibling property.
    - [FE-0020.3.7] the first child property.
    - [FE-0020.3.8] the last child property.
  - [FE-0020.4] For each class of namespace quasar::coretypes, a derivated class shall be provided which shall also be a derivative of the NamedObject class.
  - [FE-0020.5] Operations on named objects shall be thread safe.
  - [FE-0020.6] The NamedObject class shall provide a static method "create" that shall create a new named object.
    - [FE-0020.6.1] The method shall take a name and an optional parent as parameters.
    - [FE-0020.6.2] The method shall return a std::shared_ptr to the created object.
    - [FE-0020.6.3] The method shall throw a std::runtime_error if the name is invalid.
    - [FE-0020.6.4] If a parent is provided:
        - [FE-0020.6.4.1] The method shall throw a std::runtime_error if the name is not unique within the parent.
        - [FE-0020.6.4.2] The method shall throw a std::runtime_error if the parent is not a valid parent for the object.
  - [FE-0020.7] The NamedObject class shall support a "related" property allowing to reference other named objects.
  - [FE-0020.8] Relations between NamedObject instances shall be implemented using weak pointers to avoid reference cycles.
  - [FE-0020.9] Capabilities shall be provided to convert NamedObject to/from JSON, BSON, YAML, and XML.
    - [FE-0020.9.1] These capabilities shall be implemented as separate utilities or visitors, not directly in the NamedObject class, to maintain modularity.
    - [FE-0020.9.2] JSON/BSON conversion shall use the `jsoncons` library.
    - [FE-0020.9.3] YAML conversion shall use the `yaml-cpp` library.
    - [FE-0020.9.4] XML conversion shall use the `tinyxml2` library or similar.
    - [FE-0020.9.5] String conversion utilities (`toString`, `fromString`) shall be provided.
  - [FE-0020.10] NamedObject shall provide methods for comparison.
  - [FE-0020.11] NamedObject shall provide methods for hashing.
  - [FE-0020.12] Utilities shall be provided for traversing the tree (children, siblings, ancestors, descendants, all objects).
    - [FE-0020.12.1] Iteration order options: Depth-first, Breadth-first.
    - [FE-0020.12.2] **Note on Thread Safety**: Iterators are not required to be thread-safe. Thread safety during iteration must be managed by the caller (e.g., via external locking) or by iterating over a snapshot/copy of the structure.
    - [FE-0020.12.3] In-place modification during iteration shall be supported only if the iteration mechanism allows it safely (e.g., via handles or snapshots).
  - [FE-0020.13] Utilities shall be provided for searching the tree by name, type, or related object.
    - [FE-0020.13.1] Search may support in-place modification if thread safety is managed by the caller.
  - [FE-0020.14] Utilities shall be provided for copying, moving, and removing parts of the tree (children, siblings, ancestors, descendants).
 

Classes shall be associated with "quasar::named" namespace.

Project shall be localted in cmake-projects/named.

## Expected result

## Notes

### Dependency Management
- [FE-0020.15] **Header-Only Libraries**: Libraries that are header-only (e.g., `jsoncons`) may be included directly in the project's source tree (e.g., in `cmake-projects/third-party` or similar).
- [FE-0020.16] **Binary Libraries**: Libraries requiring compilation/linking (e.g., `yaml-cpp`, `tinyxml2`) should be installed via the system package manager.
- [FE-0020.17] **Required Debian Packages**:
    - [FE-0020.17.1] `libyaml-cpp-dev` (for `yaml-cpp`)
    - [FE-0020.17.2] `libtinyxml2-dev` (for `tinyxml2`)
